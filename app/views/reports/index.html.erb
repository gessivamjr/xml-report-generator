<div id="flash-messages">
  <% if notice %>
    <p class="notice p-2 bg-green-200 border-l-green-800 border border-l-8 border-solid font-semibold">Relatório deve conter no mínimo um arquivo .xml <span class="bg-gray-200 hover:bg-gray-300 rounded-3xl px-1 hover:cursor-pointer ml-3" onclick="document.getElementById('flash-messages').style = 'display:none;'">x</span></p>
  <% end %>
  <% if alert %>
    <p class="notice p-2 bg-red-200 border-l-red-800 border border-l-8 border-solid font-semibold">Relatório deve conter no mínimo um arquivo .xml <span class="bg-gray-200 hover:bg-gray-300 rounded-3xl px-1 hover:cursor-pointer ml-3" onclick="document.getElementById('flash-messages').style = 'display:none;'">x</span></p>
  <% end %>
</div>
<div class="flex justify-center w-full py-6">
  <h1 class="text-4xl font-bold">Relatórios</h1>
</div>
<div class="h-full w-full flex justify-center px-40">
  <div class="flex flex-col w-full py-8 px-14 rounded-3xl bg-neutral-800 mb-10">
    <div class="w-full mb-2">
      <%= turbo_frame_tag 'new_report' do %>
        <%= button_to "Novo relatório", reports_new_path, method: :get, class: "p-3 w-40 rounded-3xl bg-blue-700 hover:bg-blue-800 text-slate-200 font-semibold" %>
      <% end %>
    </div>
    <ul>
      <li class="p-4 flex justify-around">
        <div class="w-1/5 flex">
          <span class="font-semibold text-slate-200 text-lg">Status</span>
        </div>
        <span class="w-2/5 font-semibold text-slate-200 text-lg">Nome</span>
        <span class="w-1/5 font-semibold text-slate-200 text-lg">Criado em</span>
        <div class="w-1/5 flex justify-center">
          <span class="font-semibold text-slate-200 text-lg">Ações</span>
        </div>
      </li>
      <% @reports.each do |report| %>
        <li class="flex justify-around bg-slate-100 mb-4 p-4 rounded-3xl">
          <div class="w-1/5 pl-4">
            <% if report.status == "processing" %>
              <div class="loader"></div>
            <% elsif report.status == "avaiable" %>
              <div class="tooltip-container">
                <%= inline_svg_tag 'check_circle.svg', class: 'fill-green-800 hover:fill-green-700' %>
                <span class="tooltip-text">Disponível</span>
              </div>
            <% else %>
              <div class="tooltip-container">
                <%= inline_svg_tag 'cancel.svg', class: 'fill-red-600 hover:fill-red-500' %>
                <span class="tooltip-text">Falhou</span>
              </div>
            <% end %>
          </div>
          <div class="w-2/5 font-semibold">
            <% if report.status_avaiable? %>
              <%= link_to report.title, reports_show_path(report.id) %>
            <% else %>
              <%= report.title %>
            <% end %>
          </div>
          <div class="w-1/5 font-semibold">
            <span><%= report.created_at.strftime("%d/%m/%Y") %></span>
          </div>
          <div class="w-1/5 flex justify-evenly px-6">
            <div class="tooltip-container">
              <%= link_to inline_svg_tag('download.svg', class: 'fill-blue-800 hover:fill-blue-700'), reports_export_csv_path(report.id) %>
              <span class="tooltip-text">Exportar .csv</span>
            </div>
            <div class="tooltip-container">
              <%= button_to inline_svg_tag('delete.svg', class: 'fill-red-600 hover:fill-red-500'), reports_destroy_path(report.id), method: :delete %>
              <span class="tooltip-text">Excluir</span>
            </div>
          </div>
        </li>
      <% end %>
    </ul>
  </div>
</div>
